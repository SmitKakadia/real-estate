@model RealEstateUser.Models.UserModel

@{
    ViewData["Title"] = "User Profile";
}

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">

<style>
    .profile-container {
        background: #ffffff;
        padding: 30px;
        border-radius: 15px;
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
        animation: fadeInUp 0.8s ease-out;
    }

    keyframes fadeInUp {
        from {
            opacity: 0;
            transform: translate3d(0, 40px, 0);
        }
        to {
            opacity: 1;
            transform: none;
        }
    }

    .profile-table th,
    .profile-table td {
        vertical-align: middle;
    }

    .profile-table th {
        background-color: #f8f9fa;
        width: 30%;
    }

    .btn-edit {
        background: #007bff;
        border: none;
        color: #fff;
        padding: 10px 20px;
        border-radius: 50px;
        font-size: 16px;
        font-weight: 500;
        transition: background 0.3s, transform 0.3s;
    }

    .btn-edit:hover {
        background: #0056b3;
        transform: scale(1.05);
    }
</style>

<div class="container mt-5">
    <div class="profile-container">
        <h2 class="mb-4">@ViewData["Title"]</h2>

        @if (ViewBag.ErrorMessage != null)
        {
            <div class="alert alert-danger">@ViewBag.ErrorMessage</div>
        }
        else if (Model != null)
        {
            <table class="table table-bordered profile-table">
                <tr>
                    <th>User Name</th>
                    <td>@Model.UserName</td>
                </tr>
                <tr>
                    <th>Email</th>
                    <td>@Model.Email</td>
                </tr>
                <tr>
                    <th>Phone Number</th>
                    <td>@Model.PhoneNo</td>
                </tr>
                <tr>
                    <th>Role</th>
                    <td>@Model.Role</td>
                </tr>
            </table>
            <div class="text-end">
                <!-- Button to trigger modal -->
                <button type="button" class="btn-edit" data-bs-toggle="modal" data-bs-target="#editProfileModal">
                    <i class="fa-solid fa-pen-to-square me-2"></i> Edit Profile
                </button>
            </div>
        }
    </div>
</div>

<!-- Edit Profile Modal -->
<div class="modal fade" id="editProfileModal" tabindex="-1" aria-labelledby="editProfileModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
       <div class="modal-header">
            <h5 class="modal-title" id="editProfileModalLabel">Edit Profile</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
       </div>
       <div class="modal-body">
            <form asp-action="EditProfile" asp-controller="User" method="post" id="editProfileForm">
                <input type="hidden" asp-for="UserID" />
                <!-- Hidden field to preserve the password -->
                <input type="hidden" asp-for="Password" />
                <div class="mb-3">
                    <label asp-for="UserName" class="form-label">User Name</label>
                    <input asp-for="UserName" class="form-control" />
                    <span asp-validation-for="UserName" class="text-danger"></span>
                </div>
                <div class="mb-3">
                    <label asp-for="Email" class="form-label">Email</label>
                    <input asp-for="Email" class="form-control" />
                    <span asp-validation-for="Email" class="text-danger"></span>
                </div>
                <div class="mb-3">
                    <label asp-for="PhoneNo" class="form-label">Phone Number</label>
                    <input asp-for="PhoneNo" class="form-control" />
                    <span asp-validation-for="PhoneNo" class="text-danger"></span>
                </div>
                <div class="mb-3">
                    <label asp-for="Role" class="form-label">Role</label>
                    <input asp-for="Role" class="form-control" readonly />
                    <span asp-validation-for="Role" class="text-danger"></span>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="submit" class="btn btn-primary">Save Changes</button>
                </div>
            </form>
       </div>
    </div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
@section Scripts {
    <script src="~/lib/jquery-validation/dist/jquery.validate.min.js"></script>
    <script src="~/lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.min.js"></script>
}
